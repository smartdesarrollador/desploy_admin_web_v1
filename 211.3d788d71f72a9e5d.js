"use strict";(self.webpackChunkmy_primer_proy_angular=self.webpackChunkmy_primer_proy_angular||[]).push([[211],{3211:(w,c,i)=>{i.r(c),i.d(c,{BannerListComponent:()=>Z});var e=i(9212),d=i(6814),u=i(8432),p=i(6223),g=i(9231),x=i(553);function m(t,s){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",10),e._UZ(1,"div",11),e.qZA())}function h(t,s){if(1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",12)(1,"div",13),e.O4$(),e.TgZ(2,"svg",14),e._UZ(3,"path",15),e.qZA(),e.kcU(),e.TgZ(4,"span"),e._uU(5),e.qZA()()()),2&t){const r=e.oxw();e.xp6(5),e.Oqu(r.error())}}function f(t,s){1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",16),e.O4$(),e.TgZ(1,"svg",17),e._UZ(2,"path",18),e.qZA(),e.kcU(),e.TgZ(3,"p",19),e._uU(4,"No hay banners disponibles"),e.qZA(),e.TgZ(5,"p",20),e._uU(6,"Crea un nuevo banner para comenzar"),e.qZA()())}const _=t=>["/admin/banners/editar",t];function v(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"tr",28)(1,"td",29),e._uU(2),e.qZA(),e.TgZ(3,"td",30),e._UZ(4,"img",31),e.qZA(),e.TgZ(5,"td",32),e._uU(6),e.qZA(),e.TgZ(7,"td",33)(8,"span",34),e._uU(9),e.qZA()(),e.TgZ(10,"td",35),e._uU(11),e.qZA(),e.TgZ(12,"td",35)(13,"label",36)(14,"input",37),e.NdJ("change",function(){const a=e.CHM(r).$implicit,l=e.oxw(2);return e.KtG(l.toggleActivoBanner(a))}),e.qZA(),e._UZ(15,"div",38),e.qZA()(),e.TgZ(16,"td",39)(17,"div",40)(18,"a",41),e.O4$(),e.TgZ(19,"svg",42),e._UZ(20,"path",43),e.qZA()(),e.kcU(),e.TgZ(21,"button",44),e.NdJ("click",function(){const a=e.CHM(r).$implicit,l=e.oxw(2);return e.KtG(l.eliminarBanner(a.id))}),e.O4$(),e.TgZ(22,"svg",42),e._UZ(23,"path",45),e.qZA()()()()()}if(2&t){const r=s.$implicit,n=e.oxw(2);e.xp6(2),e.hij(" ",r.id," "),e.xp6(2),e.Q6J("src",n.obtenerUrlImagen(r.imagen),e.LSH)("alt",r.titulo),e.xp6(2),e.hij(" ",r.titulo," "),e.xp6(3),e.Oqu(r.descripcion),e.xp6(2),e.hij(" ",r.orden," "),e.xp6(3),e.Q6J("checked",r.activo),e.xp6(4),e.Q6J("routerLink",e.VKq(8,_,r.id))}}function b(t,s){if(1&t&&(e.O4$(),e.kcU(),e.TgZ(0,"div",21)(1,"table",22)(2,"thead",23)(3,"tr")(4,"th",24),e._uU(5," ID "),e.qZA(),e.TgZ(6,"th",24),e._uU(7," Imagen "),e.qZA(),e.TgZ(8,"th",24),e._uU(9," T\xedtulo "),e.qZA(),e.TgZ(10,"th",24),e._uU(11," Descripci\xf3n "),e.qZA(),e.TgZ(12,"th",24),e._uU(13," Orden "),e.qZA(),e.TgZ(14,"th",24),e._uU(15," Activo "),e.qZA(),e.TgZ(16,"th",25),e._uU(17," Acciones "),e.qZA()()(),e.TgZ(18,"tbody",26),e.YNc(19,v,24,10,"tr",27),e.qZA()()()),2&t){const r=e.oxw();e.xp6(19),e.Q6J("ngForOf",r.banners())}}let Z=(()=>{class t{constructor(){this.bannerService=(0,e.f3M)(g.Q),this.banners=(0,e.tdS)([]),this.isLoading=(0,e.tdS)(!0),this.error=(0,e.tdS)(null)}ngOnInit(){this.cargarBanners()}cargarBanners(){this.isLoading.set(!0),this.error.set(null),this.bannerService.getAllBannersAdmin().subscribe({next:r=>{this.banners.set(r),this.isLoading.set(!1)},error:r=>{console.error("Error al cargar banners",r),this.error.set("No se pudieron cargar los banners. Por favor, int\xe9ntelo de nuevo."),this.isLoading.set(!1)}})}toggleActivoBanner(r){this.bannerService.toggleActivo(r.id,!r.activo).subscribe({next:n=>{this.banners.update(o=>o.map(a=>a.id===n.id?n:a))},error:n=>{console.error("Error al cambiar estado del banner",n),this.error.set("Error al cambiar el estado del banner. Por favor, int\xe9ntelo de nuevo.")}})}eliminarBanner(r){confirm("\xbfEst\xe1 seguro de que desea eliminar este banner?")&&this.bannerService.deleteBanner(r).subscribe({next:()=>{this.banners.update(n=>n.filter(o=>o.id!==r))},error:n=>{console.error("Error al eliminar el banner",n),this.error.set("Error al eliminar el banner. Por favor, int\xe9ntelo de nuevo.")}})}obtenerUrlImagen(r){return r.startsWith("http")?r:`${x.N.urlDominioApi}/${r}`}static#e=this.\u0275fac=function(n){return new(n||t)};static#r=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-banner-list"]],standalone:!0,features:[e.jDz],decls:12,vars:4,consts:[[1,"container","px-4","py-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["routerLink","/admin/banners/crear",1,"bg-blue-600","hover:bg-blue-700","text-white","font-medium","py-2","px-4","rounded-md","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",4,"ngIf"],["class","bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-8 rounded-md flex flex-col items-center justify-center",4,"ngIf"],["class","bg-white shadow-md rounded-lg overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-blue-500"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","mb-4"],[1,"flex"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-500","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-yellow-50","border","border-yellow-200","text-yellow-800","px-4","py-8","rounded-md","flex","flex-col","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-12","w-12","text-yellow-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-medium"],[1,"text-sm","text-gray-600","mt-1"],[1,"bg-white","shadow-md","rounded-lg","overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["scope","col",1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap"],[1,"h-12","w-20","object-cover","rounded-md",3,"src","alt"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"px-6","py-4","text-sm","text-gray-500","max-w-xs","overflow-hidden"],[1,"block","truncate"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"checked","change"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:start-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","justify-end","space-x-2"],[1,"text-indigo-600","hover:text-indigo-900","p-1","rounded-full","hover:bg-indigo-100",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-red-600","hover:text-red-900","p-1","rounded-full","hover:bg-red-100",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Gesti\xf3n de Banners"),e.qZA(),e.TgZ(4,"a",3),e.O4$(),e.TgZ(5,"svg",4),e._UZ(6,"path",5),e.qZA(),e._uU(7," Crear Nuevo Banner "),e.qZA()(),e.YNc(8,m,2,0,"div",6)(9,h,6,1,"div",7)(10,f,7,0,"div",8)(11,b,20,1,"div",9),e.qZA()),2&n&&(e.xp6(8),e.Q6J("ngIf",o.isLoading()),e.xp6(1),e.Q6J("ngIf",o.error()),e.xp6(1),e.Q6J("ngIf",!o.isLoading()&&!o.error()&&0===o.banners().length),e.xp6(1),e.Q6J("ngIf",!o.isLoading()&&!o.error()&&o.banners().length>0))},dependencies:[d.ez,d.sg,d.O5,u.Bz,u.rH,p.u5]})}return t})()}}]);