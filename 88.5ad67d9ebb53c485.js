"use strict";(self.webpackChunkmy_primer_proy_angular=self.webpackChunkmy_primer_proy_angular||[]).push([[88],{1088:(M,p,s)=>{s.r(p),s.d(p,{BannerCreateComponent:()=>B});var e=s(9212),d=s(6814),i=s(6223),g=s(8432),_=s(9231);function f(n,a){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",40)(1,"div",41),e.O4$(),e.TgZ(2,"svg",42),e._UZ(3,"path",43),e.qZA(),e.kcU(),e.TgZ(4,"span"),e._uU(5),e.qZA()()()),2&n){const o=e.oxw();e.xp6(5),e.Oqu(o.successMessage)}}function b(n,a){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",44)(1,"div",41),e.O4$(),e.TgZ(2,"svg",45),e._UZ(3,"path",46),e.qZA(),e.kcU(),e.TgZ(4,"span"),e._uU(5),e.qZA()()()),2&n){const o=e.oxw();e.xp6(5),e.Oqu(o.errorMessage)}}function x(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const o=a.$implicit;e.xp6(1),e.Oqu(o)}}function h(n,a){if(1&n&&(e.TgZ(0,"div",47),e.YNc(1,x,2,1,"p",48),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.obtenerErrores("titulo"))}}function v(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Haga clic para seleccionar una imagen"),e.qZA())}function Z(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Oqu(o.imagenSeleccionada.name)}}function C(n,a){if(1&n&&(e.TgZ(0,"div",49),e._UZ(1,"img",50),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("src",o.previewImagen,e.LSH)}}function T(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const o=a.$implicit;e.xp6(1),e.Oqu(o)}}function w(n,a){if(1&n&&(e.TgZ(0,"div",47),e.YNc(1,T,2,1,"p",48),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.obtenerErrores("texto_boton"))}}function y(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const o=a.$implicit;e.xp6(1),e.hij(" ",o," ")}}function I(n,a){if(1&n&&(e.TgZ(0,"div",47),e.YNc(1,y,2,1,"p",48),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.obtenerErrores("enlace_boton"))}}function k(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const o=a.$implicit;e.xp6(1),e.Oqu(o)}}function U(n,a){if(1&n&&(e.TgZ(0,"div",47),e.YNc(1,k,2,1,"p",48),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",o.obtenerErrores("orden"))}}function q(n,a){1&n&&(e.TgZ(0,"span",51),e.O4$(),e.TgZ(1,"svg",52),e._UZ(2,"circle",53)(3,"path",54),e.qZA()())}const c=(n,a)=>({"border-red-500":n,"border-gray-300":a}),A=n=>({"opacity-50 cursor-not-allowed":n});let B=(()=>{class n{constructor(){this.fb=(0,e.f3M)(i.qu),this.router=(0,e.f3M)(g.F0),this.bannerService=(0,e.f3M)(_.Q),this.isLoading=!1,this.errorMessage=null,this.successMessage=null,this.imagenSeleccionada=null,this.previewImagen=null}ngOnInit(){this.inicializarFormulario()}inicializarFormulario(){this.bannerForm=this.fb.group({titulo:["",[i.kI.required,i.kI.maxLength(150)]],descripcion:[""],texto_boton:["",[i.kI.required,i.kI.maxLength(50)]],enlace_boton:["",[i.kI.required,i.kI.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?")]],orden:[0,[i.kI.required,i.kI.min(0)]],activo:[!0]})}onFileChange(o){const t=o.target;if(t.files&&t.files.length){const r=t.files[0];this.imagenSeleccionada=r;const l=new FileReader;l.onload=()=>{this.previewImagen=l.result},l.readAsDataURL(r)}}onSubmit(){if(this.bannerForm.invalid||!this.imagenSeleccionada)return Object.keys(this.bannerForm.controls).forEach(o=>{this.bannerForm.get(o)?.markAsTouched()}),void(this.imagenSeleccionada||(this.errorMessage="Debe seleccionar una imagen para el banner."));this.isLoading=!0,this.errorMessage=null,this.bannerService.createBanner(this.bannerForm.value,this.imagenSeleccionada).subscribe({next:o=>{this.isLoading=!1,this.successMessage=`Banner "${o.titulo}" creado exitosamente.`,setTimeout(()=>{this.router.navigate(["/admin/banners"])},1500)},error:o=>{this.isLoading=!1,this.errorMessage="Error al crear el banner. Verifique los datos e intente nuevamente.",console.error("Error al crear banner:",o)}})}cancelar(){this.router.navigate(["/admin/banners"])}get f(){return this.bannerForm.controls}esInvalido(o){const t=this.bannerForm.get(o);return!!t&&t.invalid&&(t.dirty||t.touched)}obtenerErrores(o){const t=this.bannerForm.get(o),r=[];return t&&t.errors&&(t.dirty||t.touched)?(t.errors.required&&r.push("Este campo es obligatorio."),t.errors.maxlength&&r.push(`M\xe1ximo ${t.errors.maxlength.requiredLength} caracteres permitidos.`),t.errors.pattern&&r.push("Ingrese una URL v\xe1lida."),t.errors.min&&r.push(`El valor m\xednimo es ${t.errors.min.min}.`),r):r}static#e=this.\u0275fac=function(t){return new(t||n)};static#n=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-banner-create"]],standalone:!0,features:[e.jDz],decls:69,vars:32,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-gray-800"],["type","button",1,"bg-gray-200","hover:bg-gray-300","text-gray-700","font-medium","py-2","px-4","rounded-md","flex","items-center","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["class","bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",4,"ngIf"],[1,"space-y-6",3,"formGroup","ngSubmit"],[1,"space-y-2"],["for","titulo",1,"block","text-sm","font-medium","text-gray-700"],[1,"text-red-500"],["type","text","id","titulo","formControlName","titulo","placeholder","Ingrese el t\xedtulo del banner",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["class","text-sm text-red-600 mt-1",4,"ngIf"],["for","descripcion",1,"block","text-sm","font-medium","text-gray-700"],["id","descripcion","formControlName","descripcion","placeholder","Ingrese una descripci\xf3n (opcional)","rows","3",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","imagen",1,"block","text-sm","font-medium","text-gray-700"],[1,"flex","items-center","space-x-4"],[1,"border-2","border-dashed","border-gray-300","rounded-md","p-4","w-full","flex","flex-col","items-center","justify-center","cursor-pointer","hover:bg-gray-50",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-10","w-10","text-gray-400","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-sm","text-gray-500"],[4,"ngIf"],["type","file","id","imagen","accept","image/*",1,"hidden",3,"change"],["fileInput",""],["class","h-24 w-36 border rounded-md overflow-hidden",4,"ngIf"],["for","texto_boton",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","texto_boton","formControlName","texto_boton","placeholder","Ej: Ver m\xe1s, Comprar ahora",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","enlace_boton",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","enlace_boton","formControlName","enlace_boton","placeholder","https://ejemplo.com/pagina",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],["for","orden",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","orden","formControlName","orden","min","0",1,"w-full","px-3","py-2","border","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngClass"],[1,"flex","items-center","space-x-2"],["type","checkbox","id","activo","formControlName","activo",1,"h-4","w-4","text-blue-600","focus:ring-blue-500","border-gray-300","rounded"],["for","activo",1,"text-sm","font-medium","text-gray-700"],[1,"flex","justify-end","space-x-3","pt-4"],["type","button",1,"bg-gray-200","hover:bg-gray-300","text-gray-700","font-medium","py-2","px-4","rounded-md","transition-colors",3,"click"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","text-white","font-medium","py-2","px-4","rounded-md","flex","items-center","transition-colors",3,"disabled","ngClass"],["class","mr-2",4,"ngIf"],[1,"bg-green-100","border","border-green-400","text-green-700","px-4","py-3","rounded","mb-4"],[1,"flex"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-500","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","mb-4"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-500","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-red-600","mt-1"],[4,"ngFor","ngForOf"],[1,"h-24","w-36","border","rounded-md","overflow-hidden"],["alt","Vista previa",1,"h-full","w-full","object-cover",3,"src"],[1,"mr-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(t,r){if(1&t){const l=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e._uU(4,"Crear Nuevo Banner"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return r.cancelar()}),e.O4$(),e.TgZ(6,"svg",5),e._UZ(7,"path",6),e.qZA(),e._uU(8," Volver "),e.qZA()(),e.YNc(9,f,6,1,"div",7)(10,b,6,1,"div",8),e.kcU(),e.TgZ(11,"form",9),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(12,"div",10)(13,"label",11),e._uU(14,"T\xedtulo "),e.TgZ(15,"span",12),e._uU(16,"*"),e.qZA()(),e._UZ(17,"input",13),e.YNc(18,h,2,1,"div",14),e.qZA(),e.TgZ(19,"div",10)(20,"label",15),e._uU(21,"Descripci\xf3n"),e.qZA(),e._UZ(22,"textarea",16),e.qZA(),e.TgZ(23,"div",10)(24,"label",17),e._uU(25,"Imagen "),e.TgZ(26,"span",12),e._uU(27,"*"),e.qZA()(),e.TgZ(28,"div",18)(29,"div",19),e.NdJ("click",function(){e.CHM(l);const m=e.MAs(36);return e.KtG(m.click())}),e.O4$(),e.TgZ(30,"svg",20),e._UZ(31,"path",21),e.qZA(),e.kcU(),e.TgZ(32,"p",22),e.YNc(33,v,2,0,"span",23)(34,Z,2,1,"span",23),e.qZA(),e.TgZ(35,"input",24,25),e.NdJ("change",function(m){return r.onFileChange(m)}),e.qZA()(),e.YNc(37,C,2,1,"div",26),e.qZA()(),e.TgZ(38,"div",10)(39,"label",27),e._uU(40,"Texto del bot\xf3n "),e.TgZ(41,"span",12),e._uU(42,"*"),e.qZA()(),e._UZ(43,"input",28),e.YNc(44,w,2,1,"div",14),e.qZA(),e.TgZ(45,"div",10)(46,"label",29),e._uU(47,"Enlace del bot\xf3n "),e.TgZ(48,"span",12),e._uU(49,"*"),e.qZA()(),e._UZ(50,"input",30),e.YNc(51,I,2,1,"div",14),e.qZA(),e.TgZ(52,"div",10)(53,"label",31),e._uU(54,"Orden "),e.TgZ(55,"span",12),e._uU(56,"*"),e.qZA()(),e._UZ(57,"input",32),e.YNc(58,U,2,1,"div",14),e.qZA(),e.TgZ(59,"div",33),e._UZ(60,"input",34),e.TgZ(61,"label",35),e._uU(62,"Banner activo"),e.qZA()(),e.TgZ(63,"div",36)(64,"button",37),e.NdJ("click",function(){return r.cancelar()}),e._uU(65," Cancelar "),e.qZA(),e.TgZ(66,"button",38),e.YNc(67,q,4,0,"span",39),e._uU(68),e.qZA()()()()()}2&t&&(e.xp6(9),e.Q6J("ngIf",r.successMessage),e.xp6(1),e.Q6J("ngIf",r.errorMessage),e.xp6(1),e.Q6J("formGroup",r.bannerForm),e.xp6(6),e.Q6J("ngClass",e.WLB(18,c,r.esInvalido("titulo"),!r.esInvalido("titulo"))),e.xp6(1),e.Q6J("ngIf",r.esInvalido("titulo")),e.xp6(15),e.Q6J("ngIf",!r.imagenSeleccionada),e.xp6(1),e.Q6J("ngIf",r.imagenSeleccionada),e.xp6(3),e.Q6J("ngIf",r.previewImagen),e.xp6(6),e.Q6J("ngClass",e.WLB(21,c,r.esInvalido("texto_boton"),!r.esInvalido("texto_boton"))),e.xp6(1),e.Q6J("ngIf",r.esInvalido("texto_boton")),e.xp6(6),e.Q6J("ngClass",e.WLB(24,c,r.esInvalido("enlace_boton"),!r.esInvalido("enlace_boton"))),e.xp6(1),e.Q6J("ngIf",r.esInvalido("enlace_boton")),e.xp6(6),e.Q6J("ngClass",e.WLB(27,c,r.esInvalido("orden"),!r.esInvalido("orden"))),e.xp6(1),e.Q6J("ngIf",r.esInvalido("orden")),e.xp6(8),e.Q6J("disabled",r.bannerForm.invalid||r.isLoading||!r.imagenSeleccionada)("ngClass",e.VKq(30,A,r.bannerForm.invalid||r.isLoading||!r.imagenSeleccionada)),e.xp6(1),e.Q6J("ngIf",r.isLoading),e.xp6(1),e.hij(" ",r.isLoading?"Guardando...":"Guardar Banner"," "))},dependencies:[d.ez,d.mk,d.sg,d.O5,i.UX,i._Y,i.Fj,i.wV,i.Wl,i.JJ,i.JL,i.qQ,i.sg,i.u]})}return n})()}}]);