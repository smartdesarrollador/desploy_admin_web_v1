"use strict";(self.webpackChunkmy_primer_proy_angular=self.webpackChunkmy_primer_proy_angular||[]).push([[170],{1170:(U,u,l)=>{l.r(u),l.d(u,{LoginComponent:()=>M});var e=l(9212),a=l(6814),i=l(6223),m=l(131),d=l(8432),p=l(4906),g=l(7398);function f(o,t){1&o&&e._UZ(0,"img",25),2&o&&e.Q6J("src",t.ngIf,e.LSH)}function _(o,t){if(1&o&&(e.TgZ(0,"div",26)(1,"p"),e._uU(2),e.qZA()()),2&o){const r=e.oxw();e.xp6(2),e.Oqu(r.errorMessage)}}function h(o,t){1&o&&(e.TgZ(0,"div"),e._uU(1," El correo electr\xf3nico es obligatorio. "),e.qZA())}function v(o,t){1&o&&(e.TgZ(0,"div"),e._uU(1," Ingresa un correo electr\xf3nico v\xe1lido. "),e.qZA())}function w(o,t){if(1&o&&(e.TgZ(0,"div",27),e.YNc(1,h,2,0,"div",28)(2,v,2,0,"div",28),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.emailControl||null==r.emailControl.errors?null:r.emailControl.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.emailControl||null==r.emailControl.errors?null:r.emailControl.errors.email)}}function x(o,t){1&o&&(e.O4$(),e.TgZ(0,"svg",29),e._UZ(1,"path",30)(2,"path",31),e.qZA())}function C(o,t){1&o&&(e.O4$(),e.TgZ(0,"svg",29),e._UZ(1,"path",32),e.qZA())}function b(o,t){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a es obligatoria. "),e.qZA())}function y(o,t){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a debe tener al menos 8 caracteres. "),e.qZA())}function Z(o,t){if(1&o&&(e.TgZ(0,"div",27),e.YNc(1,b,2,0,"div",28)(2,y,2,0,"div",28),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",null==r.passwordControl||null==r.passwordControl.errors?null:r.passwordControl.errors.required),e.xp6(1),e.Q6J("ngIf",null==r.passwordControl||null==r.passwordControl.errors?null:r.passwordControl.errors.minlength)}}function L(o,t){1&o&&(e.TgZ(0,"span",33),e.O4$(),e.TgZ(1,"svg",34),e._UZ(2,"circle",35)(3,"path",36),e.qZA()())}const c=o=>({color:o});function T(o,t){if(1&o&&(e.TgZ(0,"span",33),e.O4$(),e.TgZ(1,"svg",37),e.ALo(2,"async"),e._UZ(3,"path",38),e.qZA()()),2&o){const r=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(3,c,e.lcZ(2,1,r.colorSecundario)))}}const A=o=>({background:o}),I=(o,t)=>({"background-color":o,"border-color":t});let M=(()=>{class o{constructor(){this.fb=(0,e.f3M)(i.qu),this.authService=(0,e.f3M)(m.e),this.router=(0,e.f3M)(d.F0),this.route=(0,e.f3M)(d.gz),this.configuracionesService=(0,e.f3M)(p.C),this.isLoading=!1,this.errorMessage="",this.showPassword=!1,this.loginForm=this.fb.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(8)]]}),this.logoUrl=this.configuracionesService.getImagenUrl("logo_principal"),this.colorPrimario=this.configuracionesService.getAllConfiguraciones().pipe((0,g.U)(r=>r.color_primario||"#3B82F6")),this.colorSecundario=this.configuracionesService.getAllConfiguraciones().pipe((0,g.U)(r=>r.color_secundario||"#10B981")),this.colorGradiente=this.configuracionesService.getAllConfiguraciones().pipe((0,g.U)(r=>{if(r.usar_gradiente&&r.gradiente_colores)try{const s=JSON.parse(r.gradiente_colores);return`linear-gradient(135deg, ${s.inicio||"#4F46E5"}, ${s.fin||"#10B981"})`}catch{return"linear-gradient(135deg, #4F46E5, #10B981)"}return"linear-gradient(135deg, #EBF4FF, #DBEAFE)"}))}ngOnInit(){this.initForm();const r=this.route.snapshot.queryParams.error;r&&(this.errorMessage=r),this.authService.isAuthenticated()&&this.router.navigate(["/admin/dashboard"])}initForm(){this.loginForm=this.fb.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(8)]]})}onSubmit(){this.loginForm.invalid?this.loginForm.markAllAsTouched():(this.isLoading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/admin/dashboard"])},error:s=>{this.isLoading=!1,console.error("Error de inicio de sesi\xf3n:",s),this.errorMessage=401===s.status?"Credenciales incorrectas. Verifica tu correo y contrase\xf1a.":403===s.status?"No tienes permiso para acceder al panel de administraci\xf3n.":"Error en el servidor. Int\xe9ntalo nuevamente m\xe1s tarde."}}))}togglePasswordVisibility(){this.showPassword=!this.showPassword}get emailControl(){return this.loginForm.get("email")}get passwordControl(){return this.loginForm.get("password")}static#e=this.\u0275fac=function(s){return new(s||o)};static#o=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],standalone:!0,features:[e.jDz],decls:41,vars:32,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-indigo-50","to-blue-100","py-12","px-4","sm:px-6","lg:px-8",3,"ngStyle"],[1,"max-w-md","w-full","space-y-8","bg-white","p-8","rounded-xl","shadow-lg","border","border-gray-200"],[1,"text-center"],[1,"mx-auto","w-24","h-24","mb-4","overflow-hidden"],["alt","Logo","class","w-full h-full object-contain",3,"src",4,"ngIf"],[1,"mt-2","text-center","text-3xl","font-extrabold","text-gray-900"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded-md","role","alert",4,"ngIf"],[1,"mt-8","space-y-6",3,"formGroup","ngSubmit"],[1,"space-y-5"],["for","email",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","email","name","email","type","email","formControlName","email","autocomplete","email","required","","placeholder","Correo electr\xf3nico",1,"appearance-none","block","w-full","px-3","py-2.5","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm"],["class","text-xs text-red-500 mt-2 ml-1",4,"ngIf"],[1,"relative"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password","name","password","formControlName","password","autocomplete","current-password","required","","placeholder","Contrase\xf1a",1,"appearance-none","block","w-full","px-3","py-2.5","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"type"],["type","button",1,"absolute","right-0","top-8","pr-3","flex","items-center","text-sm","leading-5",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-500","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"flex","items-center","justify-between","mt-6"],[1,"flex","items-center"],["id","remember-me","name","remember-me","type","checkbox",1,"h-4","w-4","text-indigo-600","focus:ring-indigo-500","border-gray-300","rounded"],["for","remember-me",1,"ml-2","block","text-sm","text-gray-900"],[1,"text-sm"],["routerLink","/auth/forgot-password",1,"font-medium","text-indigo-600","hover:text-indigo-500",3,"ngStyle"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2.5","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm","transition-colors","duration-200",3,"disabled","ngStyle"],["class","absolute left-0 inset-y-0 flex items-center pl-3",4,"ngIf"],["alt","Logo",1,"w-full","h-full","object-contain",3,"src"],["role","alert",1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mb-4","rounded-md"],[1,"text-xs","text-red-500","mt-2","ml-1"],[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-indigo-500","group-hover:text-indigo-400",3,"ngStyle"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3),e.YNc(5,f,1,1,"img",4),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"h2",5),e._uU(8," Iniciar sesi\xf3n "),e.qZA()(),e.YNc(9,_,3,1,"div",6),e.TgZ(10,"form",7),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(11,"div",8)(12,"div")(13,"label",9),e._uU(14,"Correo electr\xf3nico"),e.qZA(),e._UZ(15,"input",10),e.YNc(16,w,3,2,"div",11),e.qZA(),e.TgZ(17,"div",12)(18,"label",13),e._uU(19,"Contrase\xf1a"),e.qZA(),e._UZ(20,"input",14),e.TgZ(21,"button",15),e.NdJ("click",function(){return n.togglePasswordVisibility()}),e.YNc(22,x,3,0,"svg",16)(23,C,2,0,"svg",16),e.qZA(),e.YNc(24,Z,3,2,"div",11),e.qZA()(),e.TgZ(25,"div",17)(26,"div",18),e._UZ(27,"input",19),e.TgZ(28,"label",20),e._uU(29," Recordarme "),e.qZA()(),e.TgZ(30,"div",21)(31,"a",22),e.ALo(32,"async"),e._uU(33," \xbfOlvidaste tu contrase\xf1a? "),e.qZA()()(),e.TgZ(34,"div")(35,"button",23),e.ALo(36,"async"),e.ALo(37,"async"),e.YNc(38,L,4,0,"span",24)(39,T,4,5,"span",24),e._uU(40),e.qZA()()()()()),2&s&&(e.Q6J("ngStyle",e.VKq(25,A,e.lcZ(1,15,n.colorGradiente))),e.xp6(5),e.Q6J("ngIf",e.lcZ(6,17,n.logoUrl)),e.xp6(4),e.Q6J("ngIf",n.errorMessage),e.xp6(1),e.Q6J("formGroup",n.loginForm),e.xp6(6),e.Q6J("ngIf",(null==n.emailControl?null:n.emailControl.invalid)&&((null==n.emailControl?null:n.emailControl.dirty)||(null==n.emailControl?null:n.emailControl.touched))),e.xp6(4),e.Q6J("type",n.showPassword?"text":"password"),e.xp6(2),e.Q6J("ngIf",!n.showPassword),e.xp6(1),e.Q6J("ngIf",n.showPassword),e.xp6(1),e.Q6J("ngIf",(null==n.passwordControl?null:n.passwordControl.invalid)&&((null==n.passwordControl?null:n.passwordControl.dirty)||(null==n.passwordControl?null:n.passwordControl.touched))),e.xp6(7),e.Q6J("ngStyle",e.VKq(27,c,e.lcZ(32,19,n.colorPrimario))),e.xp6(4),e.Q6J("disabled",n.isLoading||n.loginForm.invalid)("ngStyle",e.WLB(29,I,e.lcZ(36,21,n.colorPrimario),e.lcZ(37,23,n.colorPrimario))),e.xp6(3),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.hij(" ",n.isLoading?"Iniciando sesi\xf3n...":"Iniciar sesi\xf3n"," "))},dependencies:[a.ez,a.O5,a.PC,a.Ov,i.UX,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,d.rH]})}return o})()}}]);