"use strict";(self.webpackChunkmy_primer_proy_angular=self.webpackChunkmy_primer_proy_angular||[]).push([[635],{2635:(q,d,a)=>{a.r(d),a.d(d,{ResetPasswordComponent:()=>A});var n=a(6223),l=a(8432),u=a(6814),c=a(4716),e=a(9212),p=a(131);function m(s,t){if(1&s&&(e.TgZ(0,"div",9)(1,"p"),e._uU(2),e.qZA()()),2&s){const o=e.oxw();e.xp6(2),e.Oqu(o.successMessage)}}function g(s,t){if(1&s&&(e.TgZ(0,"div",10)(1,"p"),e._uU(2),e.qZA()()),2&s){const o=e.oxw();e.xp6(2),e.Oqu(o.errorMessage)}}function f(s,t){1&s&&(e.TgZ(0,"div",11),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"circle",13)(3,"path",14),e.qZA()())}function _(s,t){1&s&&(e.O4$(),e.TgZ(0,"svg",27),e._UZ(1,"path",28)(2,"path",29),e.qZA())}function w(s,t){1&s&&(e.O4$(),e.TgZ(0,"svg",27),e._UZ(1,"path",30),e.qZA())}function h(s,t){1&s&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a es obligatoria. "),e.qZA())}function x(s,t){1&s&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a debe tener al menos 8 caracteres. "),e.qZA())}function v(s,t){if(1&s&&(e.TgZ(0,"div",31),e.YNc(1,h,2,0,"div",32)(2,x,2,0,"div",32),e.qZA()),2&s){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==o.passwordControl||null==o.passwordControl.errors?null:o.passwordControl.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.passwordControl||null==o.passwordControl.errors?null:o.passwordControl.errors.minlength)}}function C(s,t){1&s&&(e.O4$(),e.TgZ(0,"svg",27),e._UZ(1,"path",28)(2,"path",29),e.qZA())}function b(s,t){1&s&&(e.O4$(),e.TgZ(0,"svg",27),e._UZ(1,"path",30),e.qZA())}function T(s,t){1&s&&(e.TgZ(0,"div"),e._uU(1," Debes confirmar tu contrase\xf1a. "),e.qZA())}function Z(s,t){if(1&s&&(e.TgZ(0,"div",31),e.YNc(1,T,2,0,"div",32),e.qZA()),2&s){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==o.passwordConfirmControl||null==o.passwordConfirmControl.errors?null:o.passwordConfirmControl.errors.required)}}function P(s,t){1&s&&(e.TgZ(0,"div",31),e._uU(1," Las contrase\xf1as no coinciden. "),e.qZA())}function y(s,t){1&s&&(e.TgZ(0,"span",33),e.O4$(),e.TgZ(1,"svg",34),e._UZ(2,"circle",13)(3,"path",14),e.qZA()())}function k(s,t){1&s&&(e.TgZ(0,"span",33),e.O4$(),e.TgZ(1,"svg",35),e._UZ(2,"path",36),e.qZA()())}function M(s,t){if(1&s){const o=e.EpF();e.TgZ(0,"form",15),e.NdJ("ngSubmit",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.onSubmit())}),e.TgZ(1,"div",16)(2,"div",17)(3,"label",18),e._uU(4,"Nueva contrase\xf1a"),e.qZA(),e._UZ(5,"input",19),e.TgZ(6,"button",20),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.togglePasswordVisibility())}),e.YNc(7,_,3,0,"svg",21)(8,w,2,0,"svg",21),e.qZA(),e.YNc(9,v,3,2,"div",22),e.qZA(),e.TgZ(10,"div",17)(11,"label",23),e._uU(12,"Confirmar contrase\xf1a"),e.qZA(),e._UZ(13,"input",24),e.TgZ(14,"button",20),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.toggleConfirmPasswordVisibility())}),e.YNc(15,C,3,0,"svg",21)(16,b,2,0,"svg",21),e.qZA(),e.YNc(17,Z,2,1,"div",22)(18,P,2,0,"div",22),e.qZA()(),e.TgZ(19,"div")(20,"button",25),e.YNc(21,y,4,0,"span",26)(22,k,3,0,"span",26),e._uU(23),e.qZA()()()}if(2&s){const o=e.oxw();e.Q6J("formGroup",o.resetForm),e.xp6(5),e.Q6J("type",o.showPassword?"text":"password"),e.xp6(2),e.Q6J("ngIf",!o.showPassword),e.xp6(1),e.Q6J("ngIf",o.showPassword),e.xp6(1),e.Q6J("ngIf",(null==o.passwordControl?null:o.passwordControl.invalid)&&((null==o.passwordControl?null:o.passwordControl.dirty)||(null==o.passwordControl?null:o.passwordControl.touched))),e.xp6(4),e.Q6J("type",o.showConfirmPassword?"text":"password"),e.xp6(2),e.Q6J("ngIf",!o.showConfirmPassword),e.xp6(1),e.Q6J("ngIf",o.showConfirmPassword),e.xp6(1),e.Q6J("ngIf",(null==o.passwordConfirmControl?null:o.passwordConfirmControl.invalid)&&((null==o.passwordConfirmControl?null:o.passwordConfirmControl.dirty)||(null==o.passwordConfirmControl?null:o.passwordConfirmControl.touched))),e.xp6(1),e.Q6J("ngIf",o.resetForm.hasError("notSame")&&(null==o.passwordConfirmControl?null:o.passwordConfirmControl.dirty)&&!(null!=o.passwordConfirmControl&&null!=o.passwordConfirmControl.errors&&o.passwordConfirmControl.errors.required)),e.xp6(2),e.Q6J("disabled",o.isLoading||o.resetForm.invalid),e.xp6(1),e.Q6J("ngIf",o.isLoading),e.xp6(1),e.Q6J("ngIf",!o.isLoading),e.xp6(1),e.hij(" ",o.isLoading?"Procesando...":"Restablecer contrase\xf1a"," ")}}function I(s,t){1&s&&(e.TgZ(0,"div",37)(1,"a",38),e._uU(2," Solicitar un nuevo enlace de recuperaci\xf3n "),e.qZA()())}let A=(()=>{class s{constructor(o,i,r,R){this.fb=o,this.authService=i,this.route=r,this.router=R,this.isLoading=!1,this.errorMessage=null,this.successMessage=null,this.showPassword=!1,this.showConfirmPassword=!1,this.token=null,this.email=null,this.isTokenValid=!1,this.isTokenValidating=!0,this.resetForm=this.fb.group({password:["",[n.kI.required,n.kI.minLength(8)]],password_confirmation:["",n.kI.required]},{validators:this.checkPasswords})}ngOnInit(){if(this.token=this.route.snapshot.queryParamMap.get("token"),this.email=this.route.snapshot.queryParamMap.get("email"),!this.token||!this.email)return this.errorMessage="Enlace de recuperaci\xf3n inv\xe1lido. Por favor solicita un nuevo enlace.",void(this.isTokenValidating=!1);this.authService.validateResetToken(this.token,this.email).pipe((0,c.x)(()=>this.isTokenValidating=!1)).subscribe({next:()=>{this.isTokenValid=!0},error:o=>{this.errorMessage=o.error.message||"El enlace de recuperaci\xf3n no es v\xe1lido o ha expirado."}})}checkPasswords(o){const i=o.get("password")?.value,r=o.get("password_confirmation")?.value;return i===r?null:{notSame:!0}}get passwordControl(){return this.resetForm.get("password")}get passwordConfirmControl(){return this.resetForm.get("password_confirmation")}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}onSubmit(){this.resetForm.invalid||(this.isLoading=!0,this.errorMessage=null,this.successMessage=null,this.authService.resetPassword({email:this.email,token:this.token,password:this.resetForm.value.password,password_confirmation:this.resetForm.value.password_confirmation}).pipe((0,c.x)(()=>this.isLoading=!1)).subscribe({next:o=>{this.successMessage=o.message||"Tu contrase\xf1a ha sido restablecida exitosamente.",this.resetForm.reset(),setTimeout(()=>{this.router.navigate(["/auth/login"])},3e3)},error:o=>{this.errorMessage=o.error.message||"Ocurri\xf3 un error al restablecer tu contrase\xf1a. Intenta de nuevo."}}))}static#e=this.\u0275fac=function(i){return new(i||s)(e.Y36(n.qu),e.Y36(p.e),e.Y36(l.gz),e.Y36(l.F0))};static#o=this.\u0275cmp=e.Xpm({type:s,selectors:[["app-reset-password"]],standalone:!0,features:[e.jDz],decls:12,vars:5,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-indigo-50","to-blue-100","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8","bg-white","p-8","rounded-xl","shadow-lg","border","border-gray-200"],[1,"mt-2","text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],["class","bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4 rounded-md","role","alert",4,"ngIf"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4 rounded-md","role","alert",4,"ngIf"],["class","flex justify-center py-10",4,"ngIf"],["class","mt-8 space-y-6",3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center",4,"ngIf"],["role","alert",1,"bg-green-100","border-l-4","border-green-500","text-green-700","p-4","mb-4","rounded-md"],["role","alert",1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mb-4","rounded-md"],[1,"flex","justify-center","py-10"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-10","w-10","text-indigo-600"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-8","space-y-6",3,"formGroup","ngSubmit"],[1,"space-y-5"],[1,"relative"],["for","password",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password","name","password","formControlName","password","autocomplete","new-password","required","","placeholder","Nueva contrase\xf1a",1,"appearance-none","block","w-full","px-3","py-2.5","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"type"],["type","button",1,"absolute","right-0","top-8","pr-3","flex","items-center","text-sm","leading-5",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-500","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","text-xs text-red-500 mt-2 ml-1",4,"ngIf"],["for","password_confirmation",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","password_confirmation","name","password_confirmation","formControlName","password_confirmation","autocomplete","new-password","required","","placeholder","Confirmar contrase\xf1a",1,"appearance-none","block","w-full","px-3","py-2.5","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"type"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2.5","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm","transition-colors","duration-200",3,"disabled"],["class","absolute left-0 inset-y-0 flex items-center pl-3",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"],[1,"text-xs","text-red-500","mt-2","ml-1"],[4,"ngIf"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","aria-hidden","true",1,"h-5","w-5","text-indigo-500","group-hover:text-indigo-400"],["fill-rule","evenodd","d","M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule","evenodd"],[1,"text-center"],["routerLink","/auth/forgot-password",1,"font-medium","text-indigo-600","hover:text-indigo-500"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h2",2),e._uU(4," Restablecer contrase\xf1a "),e.qZA(),e.TgZ(5,"p",3),e._uU(6," Crea una nueva contrase\xf1a segura para tu cuenta "),e.qZA()(),e.YNc(7,m,3,1,"div",4)(8,g,3,1,"div",5)(9,f,4,0,"div",6)(10,M,24,14,"form",7)(11,I,3,0,"div",8),e.qZA()()),2&i&&(e.xp6(7),e.Q6J("ngIf",r.successMessage),e.xp6(1),e.Q6J("ngIf",r.errorMessage),e.xp6(1),e.Q6J("ngIf",r.isTokenValidating),e.xp6(1),e.Q6J("ngIf",r.isTokenValid&&!r.isTokenValidating),e.xp6(1),e.Q6J("ngIf",!r.isTokenValidating&&!r.isTokenValid&&r.errorMessage))},dependencies:[u.ez,u.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,l.rH],encapsulation:2})}return s})()}}]);