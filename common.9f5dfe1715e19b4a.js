"use strict";(self.webpackChunkmy_primer_proy_angular=self.webpackChunkmy_primer_proy_angular||[]).push([[592],{9231:(D,f,s)=>{s.d(f,{Q:()=>h});var u=s(1474),p=s(7398),a=s(6306),i=s(8504),v=s(4664),E=s(553),_=s(9212);let h=(()=>{class c{constructor(r){this.http=r,this.apiUrl=`${E.N.apiUrl}/banners`,this.adminApiUrl=`${E.N.apiUrl}/admin/banners`}getAllBanners(){return this.http.get(this.apiUrl).pipe((0,p.U)(r=>r.data),(0,a.K)(r=>(console.error("Error al obtener banners",r),(0,i._)(()=>new Error("Error al obtener banners. Por favor, int\xe9ntelo de nuevo.")))))}getAllBannersAdmin(){return this.http.get(this.adminApiUrl).pipe((0,p.U)(r=>r.data),(0,a.K)(r=>(console.error("Error al obtener banners administrativos",r),(0,i._)(()=>new Error("Error al obtener los banners. Por favor, int\xe9ntelo de nuevo.")))))}getBannerById(r){return this.http.get(`${this.apiUrl}/${r}`).pipe((0,p.U)(o=>o.data),(0,a.K)(o=>(console.error(`Error al obtener banner con ID ${r}`,o),(0,i._)(()=>new Error("Error al obtener el banner. Por favor, int\xe9ntelo de nuevo.")))))}createBanner(r,o){const n=new FormData;void 0!==r.titulo&&n.append("titulo",r.titulo),void 0!==r.descripcion&&n.append("descripcion",r.descripcion),void 0!==r.texto_boton&&n.append("texto_boton",r.texto_boton),void 0!==r.enlace_boton&&n.append("enlace_boton",r.enlace_boton),void 0!==r.orden&&n.append("orden",String(r.orden)),void 0!==r.activo&&n.append("activo",r.activo?"1":"0"),o instanceof File?(n.append("imagen",o,o.name),console.log("Enviando imagen:",o.name,o.type,o.size)):console.error("La imagen no es un archivo v\xe1lido"),console.log("Campos enviados:"),n.forEach((e,l)=>{console.log(`${l}: ${e}`)});const t=new u.WM;return this.http.post(this.apiUrl,n,{headers:t}).pipe((0,p.U)(e=>e.data),(0,a.K)(e=>(console.error("Error al crear el banner",e),e.error&&e.error.errors&&console.error("Detalles de validaci\xf3n:",e.error.errors),(0,i._)(()=>new Error("Error al crear el banner. Por favor, int\xe9ntelo de nuevo.")))))}updateBanner(r,o,n){if(1===Object.keys(o).length&&"activo"in o)return this.getBannerById(r).pipe((0,v.w)(e=>{const l=new FormData;return l.append("activo",o.activo?"1":"0"),l.append("titulo",e.titulo),l.append("descripcion",e.descripcion||""),l.append("texto_boton",e.texto_boton),l.append("enlace_boton",e.enlace_boton),l.append("orden",String(e.orden)),this.http.post(`${this.adminApiUrl}/${r}`,l).pipe((0,p.U)(d=>d.data),(0,a.K)(d=>(console.error(`Error al actualizar banner con ID ${r}`,d),(0,i._)(()=>new Error("Error al actualizar el banner. Por favor, int\xe9ntelo de nuevo.")))))}),(0,a.K)(e=>(console.error(`Error al obtener banner para actualizar con ID ${r}`,e),(0,i._)(()=>new Error("Error al actualizar el banner. No se pudo obtener la informaci\xf3n completa.")))));const t=new FormData;return Object.keys(o).forEach(e=>{void 0!==o[e]&&t.append(e,"activo"===e&&"boolean"==typeof o[e]?o[e]?"1":"0":String(o[e]))}),n&&t.append("imagen",n,n.name),this.http.post(`${this.adminApiUrl}/${r}`,t).pipe((0,p.U)(e=>e.data),(0,a.K)(e=>(console.error(`Error al actualizar banner con ID ${r}`,e),(0,i._)(()=>new Error("Error al actualizar el banner. Por favor, int\xe9ntelo de nuevo.")))))}deleteBanner(r){return this.http.delete(`${this.apiUrl}/${r}`).pipe((0,a.K)(o=>(console.error(`Error al eliminar banner con ID ${r}`,o),(0,i._)(()=>new Error("Error al eliminar el banner. Por favor, int\xe9ntelo de nuevo.")))))}toggleActivo(r,o){const n=new FormData;return n.append("activo",o?"1":"0"),this.http.post(`${this.adminApiUrl}/${r}`,n).pipe((0,p.U)(t=>t.data),(0,a.K)(t=>(console.error(`Error al cambiar estado del banner con ID ${r}`,t),(0,i._)(()=>new Error("Error al cambiar el estado del banner. Por favor, int\xe9ntelo de nuevo.")))))}static#r=this.\u0275fac=function(o){return new(o||c)(_.LFG(u.eN))};static#e=this.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);